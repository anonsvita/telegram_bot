# ü§ñ Telegram –ë–æ—Ç-–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫

Telegram –±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –∞—É–¥–∏–æ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ Whisper.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìù **–ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞** –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —è–∑—ã–∫–∞–º–∏
- üé§ **–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è –∞—É–¥–∏–æ** —Å –ø–æ–º–æ—â—å—é Whisper (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π GPU)
- üîÑ **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞** –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ –∞—É–¥–∏–æ
- üéØ **–£–º–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**: RU ‚Üí EN, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Üí RU
- üì¶ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ** –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚ö° **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏** –∏–º–µ—é—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –¥–æ–∫—Å—Ç—Ä–∏–Ω–≥–∏
- ‚úÖ **–°–ª–æ–∂–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏** –∫–æ–¥–∞ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –û–ø–∏—Å–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ async —Ç–æ–ª—å–∫–æ –¥–ª—è I/O (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∫–∞)
- ‚úÖ FFmpeg –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ
- ‚úÖ –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç [@BotFather](https://t.me/BotFather)

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É

1. **–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –∏ –¥–æ–±–∞–≤—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ù–µ –∑–∞–±—É–¥—å –ø—Ä–æ —Ç–æ–∫–µ–Ω.**
```env
BOT_TOKEN=your_bot_token_here
WHISPER_MODEL=small
WHISPER_DEVICE=cpu
```
**`env.example` –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `.env`**

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- Poetry
- FFmpeg (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ FFmpeg**
   - Windows: https://ffmpeg.org/download.html
   - Linux: `sudo apt-get install ffmpeg`
   - macOS: `brew install ffmpeg`

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
poetry install
poetry shell
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
```bash
poetry run python main.py
```

## üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω—ã –≤ `env.example`**

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram_bot/
‚îú‚îÄ‚îÄ src/                          # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ translation.py           # –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ audio.py                 # –ê—É–¥–∏–æ + Whisper
‚îÇ   ‚îú‚îÄ‚îÄ text.py                  # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py             # UI –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ utils.py                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ handlers.py              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ data/                         # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ main.py                       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ
‚îú‚îÄ‚îÄ pyproject.toml               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Poetry)
‚îú‚îÄ‚îÄ poetry.lock
‚îÇ
‚îú‚îÄ‚îÄ env.example                   # –ü—Ä–∏–º–µ—Ä .env
‚îÇ
‚îî‚îÄ‚îÄ README.md                     # –ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```

### –ö–æ–º–∞–Ω–¥—ã

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- `/queue` - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á

### –ü—Ä–∞–≤–∏–ª–æ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

- –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç/–∞—É–¥–∏–æ –Ω–∞ **—Ä—É—Å—Å–∫–æ–º** ‚Üí –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ **–∞–Ω–≥–ª–∏–π—Å–∫–∏–π**
- –ï—Å–ª–∏ –Ω–∞ **–¥—Ä—É–≥–æ–º —è–∑—ã–∫–µ** ‚Üí –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ **—Ä—É—Å—Å–∫–∏–π**

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë§ –ê–≤—Ç–æ—Ä

Vitaly Kuzmin

---

**–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –∏ –∞—É–¥–∏–æ –≤ Telegram**


## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Telegram Bot API:** https://core.telegram.org/bots
- **Aiogram –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.aiogram.dev/
- **Whisper:** https://github.com/openai/whisper
